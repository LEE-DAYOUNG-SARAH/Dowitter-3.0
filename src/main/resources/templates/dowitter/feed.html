<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/main.css}"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>피드</title>
</head>
<script></script>
<body>
<section id="timelineHeader">
    <div class="safeArea">
        <a href="/timeline" class="logo">
            <img th:src="@{/img/dowitter.png}" alt="로고" />
        </a>
        <div class="searchArea">
            <div class="inputArea">
                <label for="">@</label>
                <input type="text" id="search" placeholder="ID" />
                <ul class="selectUserArea">
                    <li class="searchedUser">
                        <a href="userID">
                            @userA
                        </a>
                    </li>
                    <li class="searchedUser">
                        <a href="userID">
                            @userB
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="userArea">

            <!-- 로그인 상태 -->
            <div class="loggedInNow">
                <a th:href="@{/feed/{uid}(uid=${loginMember.uid})}">@[[${loginMember.userId}]]</a>
                <a href="/logout">로그아웃</a>
            </div>

            <!-- 로그아웃상태 -->
            <!-- <div class="loggedOUtNow">
                <a href="goLogin.do">로그인</a>
                <a href="goJoin.do">회원가입</a>
            </div> -->
        </div>
    </div>
</section>
<div id="wrap">
    <section id="myFeedBody">
        <div class="myProfile">
            <p class="myProfileId">[[${feedMember.userId}]]님의 피드</p>
            <a href="/modifyMember" class="myProfileModify" th:if="${feedMember.uid eq loginMember.uid}">
                회원정보수정
            </a>
        </div>
        <div class="myTimeline">
            <form>
                <div class="writeFeed">
                    <textarea name="content" id="" cols="30" rows="10" placeholder="아무말이나 적어보세요..!"></textarea>
                    <div class="write" onclick="document.getElementById('writeButton').click()">
                        글쓰기
                        <input type="button" id="writeButton" onclick="doWhat(this.form, 'insertDocF.do', true)" />
                        <input type="hidden" name="id" value="${id}" />
                    </div>
                </div>
            </form>
            <div class="readFeeds">
                <ul class="feeds">
                    <th:block th:each="feed : ${feedList}">
                        <li class="feed">
                            <form name="${doc.num}">
                                <div class="feedTitle">
                                    <a class="feedId" href="">[[${feed.userId}]]</a>
                                    <span class="feedDate" th:text="${#dates.format(feed.regDatetime, 'yyyy-MM-dd HH:mm:ss')}"></span>
                                </div>

                                <div class="feedContent">[[${feed.content}]]</div>
                                <div th:if="${feedMember.uid eq loginMember.uid}" class="feedBtns">
                                    <div class="feedModify" onclick="showModifier(${doc.num});">
                                        수정
                                    </div>
                                    <div class="feedDelete" onclick="document.getElementById('feedDeleteButton').click()">
                                        삭제
                                    </div>
                                </div>
                            </form>
                        </li>
                    </th:block>
                </ul>
                <p class="nomore">더 이상 표시할 두윗이 없습니다..! (;ㅅ;)</p>
            </div>
        </div>
    </section>
</div>
<div id="modifierWrap">
    <div class="modifier">
        <div class="modifyWindow">
            <form>
                <input type="hidden" name="num" />
                <input type="hidden" name="id" value="${id}" />
                <div class="writeFeed">
                    <textarea name="content" placeholder="아무말이나 적어보세요..!"></textarea>
                    <div class="cancelModify" onclick="hideModifier()">
                        취소
                    </div>
                    <div class="modify" onclick="document.getElementById('modifyButton2').click()">
                        수정
                        <input type="button" id="modifyButton2" onclick="doWhat(this.form, 'updateDocF.do',true)" />
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>